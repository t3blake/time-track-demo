# Time Entry Demo

A lightweight time-tracking web app built on Azure Static Web Apps with Azure Table Storage for persistence and Entra ID for authentication.

![Azure Static Web Apps](https://img.shields.io/badge/Azure-Static%20Web%20Apps-0078D4?logo=microsoft-azure)
![Azure Functions](https://img.shields.io/badge/Azure-Functions-0062AD?logo=azure-functions)
![Azure Table Storage](https://img.shields.io/badge/Azure-Table%20Storage-0078D4?logo=microsoft-azure)

## What You Get

- **Single-page time entry UI** — date, project, task, hours, billable flag, notes
- **Persistent storage** — Azure Table Storage (no SQL database needed)
- **Entra ID authentication** — locked to your Azure AD tenant
- **Serverless API** — Azure Functions (managed by Static Web Apps)
- **Zero infrastructure to manage** — all serverless, free tier eligible

## Architecture

```
Browser → Azure Static Web Apps (Free)
              ├── app/index.html (front-end)
              └── api/ (Azure Functions)
                    ├── GET    /api/entries
                    ├── POST   /api/entries
                    └── DELETE /api/entries/{id}
                          ↓
                  Azure Table Storage
                  (Entra ID service principal auth)
```

## Prerequisites

| Tool | Minimum Version | Install |
|------|----------------|---------|
| **PowerShell** | 7+ | Built into Windows 11, or [install](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell) |
| **Azure CLI** | 2.50+ | `winget install Microsoft.AzureCLI` |
| **Node.js** | 18+ | `winget install OpenJS.NodeJS.LTS` |

You also need:
- An Azure subscription (free tier works)
- Permissions to create app registrations in your Entra ID tenant

## Quick Start

```powershell
# 1. Clone this repo
git clone https://github.com/YOUR_USERNAME/time-entry-demo.git
cd time-entry-demo

# 2. Log in to Azure (if not already)
az login

# 3. Deploy everything
./deploy.ps1
```

That's it. The script will:
1. Create a resource group, storage account, and Static Web App
2. Register Entra ID apps (one for auth, one for Table Storage access)
3. Configure all app settings
4. Deploy the app and API

At the end it prints the URL to open in your browser.

## Options

```powershell
# Deploy with a custom prefix (affects resource names)
./deploy.ps1 -Prefix myteam

# Deploy to a different region
./deploy.ps1 -Location westus2

# Deploy without Entra ID auth (open to anyone)
./deploy.ps1 -SkipAuth

# Tear down everything
./deploy.ps1 -Teardown
./deploy.ps1 -Prefix myteam -Teardown   # if you used a custom prefix
```

## Project Structure

```
time-entry-demo/
├── deploy.ps1                    # One-click deployment script
├── app/
│   ├── index.html                # Single-file front-end (HTML + CSS + JS)
│   └── staticwebapp.config.json  # Generated by deploy.ps1
└── api/
    ├── host.json                 # Azure Functions host config
    ├── package.json              # Node.js dependencies
    ├── getEntries/               # GET /api/entries
    │   ├── function.json
    │   └── index.js
    ├── saveEntry/                # POST /api/entries
    │   ├── function.json
    │   └── index.js
    └── deleteEntry/              # DELETE /api/entries/{id}
        ├── function.json
        └── index.js
```

## Cost

All resources are free-tier eligible:
- **Static Web Apps**: Free tier (100 GB bandwidth/month)
- **Azure Table Storage**: ~$0.045/GB/month (pennies for demo usage)
- **Azure Functions**: Managed by SWA, included in free tier

## Cleanup

To remove all Azure resources:

```powershell
./deploy.ps1 -Teardown
```

This deletes the resource group (and everything in it) plus the Entra ID app registrations.
